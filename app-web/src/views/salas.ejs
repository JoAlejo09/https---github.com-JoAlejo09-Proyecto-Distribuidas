<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Gestión de Salas</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">

<nav class="navbar navbar-dark bg-secondary shadow-sm mb-4">
    <div class="container">
        <a class="navbar-brand fw-bold" href="/inicio">Sistema de Salas</a>
        <div>
            <a href="/inicio" class="btn btn-outline-light btn-sm me-2">Dashboard</a>
            <a href="/login" class="btn btn-outline-warning btn-sm">Salir</a>
        </div>
    </div>
</nav>

<div class="container">
    <div class="row g-4">

        <!-- Formulario -->
        <div class="col-lg-4">
            <div class="card shadow-sm">
                <div class="card-header fw-bold">Nueva Sala</div>
                <div class="card-body">

                    <% if (error) { %>
                        <div class="alert alert-danger small"><%= error %></div>
                    <% } %>
                    <% if (success) { %>
                        <div class="alert alert-success small"><%= success %></div>
                    <% } %>

                    <form action="/salas/registro" method="POST">
                        <input class="form-control mb-2" name="nombre" placeholder="Nombre" required>
                        <input class="form-control mb-2" name="codigo" placeholder="Código único" required>
                        <input type="number" class="form-control mb-2" name="capacidad" placeholder="Capacidad" required>

                        <select class="form-select mb-3" name="estado">
                            <option>Disponible</option>
                            <option>Ocupada</option>
                            <option>En Mantenimiento</option>
                        </select>

                        <button class="btn btn-success w-100">Registrar Sala</button>
                    </form>

                </div>
            </div>
        </div>

        <!-- Tabla -->
        <div class="col-lg-8">
            <div class="card shadow-sm">
                <div class="card-header fw-bold">Salas Registradas</div>
                <div class="card-body p-0">
                    <table class="table table-hover mb-0">
                        <thead class="table-light">
                            <tr>
                                <th>Nombre</th>
                                <th>Código</th>
                                <th>Capacidad</th>
                                <th>Estado</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% if (salas.length === 0) { %>
                                <tr>
                                    <td colspan="4" class="text-center text-muted py-4">
                                        No existen registros
                                    </td>
                                </tr>
                            <% } %>

                            <% salas.forEach(s => { %>
                                <tr>
                                    <td><%= s.nombre %></td>
                                    <td><span class="badge bg-dark"><%= s.codigo %></span></td>
                                    <td><%= s.capacidad %></td>
                                    <td>
                                        <span class="badge 
                                        <%= s.estado === 'Disponible' ? 'bg-success' : 'bg-warning text-dark' %>">
                                        <%= s.estado %>
                                        </span>
                                    </td>
                                </tr>
                            <% }) %>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </div>
</div>

</body>
</html>
